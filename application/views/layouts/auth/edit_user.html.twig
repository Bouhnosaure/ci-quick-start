{% extends "layout.html.twig" %}

{% block body %}
    <h1>{{lang('edit_user_heading') }}</h1>
    <p>{{lang('edit_user_subheading') }}</p>

    <div id="infoMessage">{{message }}</div>

    {{form_open(uri_string()) }}

    <p>
        {{lang('edit_user_fname_label', 'first_name') }} <br />
        {{form_input(first_name) }}
    </p>

    <p>
        {{lang('edit_user_lname_label', 'last_name') }} <br />
        {{form_input(last_name) }}
    </p>

    <p>
        {{lang('edit_user_company_label', 'company') }} <br />
        {{form_input(company) }}
    </p>

    <p>
        {{lang('edit_user_phone_label', 'phone') }} <br />
        {{form_input(phone) }}
    </p>

    <p>
        {{lang('edit_user_password_label', 'password') }} <br />
        {{form_input(password) }}
    </p>

    <p>
        {{lang('edit_user_password_confirm_label', 'password_confirm') }}<br />
        {{form_input(password_confirm) }}
    </p>

    {% if is_admin() %}
        <h3>{{lang('edit_user_groups_heading') }}</h3>
        {% for group in groups %}
            <label class="checkbox">
                {% set gID = group.id %}
                {% set checked = null %}
                {% set item = null %}

                {% for grp in currentGroups if gID == grp.id %}
                    {% set checked = 'checked="checked"' %}
                {% endfor %}

                <input type="checkbox" name="groups[]" value="{{group['id'] }}"{{checked }}>
                {{ group.name |escape }}
            </label>
        {% endfor %}
    {% endif %}

    {{form_hidden( {'id': user.id} ) }}
    {{form_hidden( csrf )}}

    <p>{{form_submit('submit', lang('edit_user_submit_btn')) }}</p>

    {{form_close() }}
{% endblock %}